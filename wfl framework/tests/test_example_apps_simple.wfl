// Simple Example Apps Test - Inline (no modules)
display "=== Example Applications Test ==="
display ""

// Test 1: Blog Post Model
display "Test 1: Blog Post Model"
create container PostModel:
    property post_id: Number
    property post_title: Text
    property post_content: Text
    property is_valid: Boolean

    action to_json:
        store json as "{\"id\":" with post_id
        change json to json with ",\"title\":" with stringify_json of post_title
        change json to json with ",\"content\":" with stringify_json of post_content
        change json to json with "}"
        return json
    end
end

create new PostModel as post:
    post_id is 1
    post_title is "First Blog Post"
    post_content is "This is the content of the first post."
    is_valid is yes
end

store post_json as post.to_json()
display "Post JSON: " with post_json
display "✓ Blog post model works"
display ""

// Test 2: API User Model
display "Test 2: API User Model"
create container ApiUser:
    property user_id: Number
    property username: Text
    property email: Text

    action to_json:
        store json as "{\"id\":" with user_id
        change json to json with ",\"username\":" with stringify_json of username
        change json to json with ",\"email\":" with stringify_json of email
        change json to json with "}"
        return json
    end
end

create new ApiUser as user:
    user_id is 1
    username is "alice"
    email is "alice@example.com"
end

store user_json as user.to_json()
display "User JSON: " with user_json
display "✓ API user model works"
display ""

// Test 3: Multiple Posts (Blog Controller simulation)
display "Test 3: Blog Posts Collection"
create new PostModel as post1:
    post_id is 1
    post_title is "First Post"
    post_content is "Content 1"
    is_valid is yes
end

create new PostModel as post2:
    post_id is 2
    post_title is "Second Post"
    post_content is "Content 2"
    is_valid is yes
end

store posts as create list
push with posts and post1
push with posts and post2

display "Blog has " with length of posts with " posts"

store posts_json as "["
store first as yes

for each p in posts:
    check if first is no:
        change posts_json to posts_json with ","
    end check
    change posts_json to posts_json with p.to_json()
    change first to no
end for

change posts_json to posts_json with "]"

display "Posts JSON: " with posts_json
display "✓ Blog posts collection works"
display ""

// Test 4: Multiple Users (API Controller simulation)
display "Test 4: API Users Collection"
create new ApiUser as user1:
    user_id is 1
    username is "alice"
    email is "alice@example.com"
end

create new ApiUser as user2:
    user_id is 2
    username is "bob"
    email is "bob@example.com"
end

create new ApiUser as user3:
    user_id is 3
    username is "charlie"
    email is "charlie@example.com"
end

store users as create list
push with users and user1
push with users and user2
push with users and user3

display "API has " with length of users with " users"

store users_json as "["
store first_user as yes

for each u in users:
    check if first_user is no:
        change users_json to users_json with ","
    end check
    change users_json to users_json with u.to_json()
    change first_user to no
end for

change users_json to users_json with "]"

display "Users JSON: " with users_json
display "✓ API users collection works"
display ""

display "=== All Example App Tests Passed! ==="
display ""
display "Example Applications Validated:"
display "  ✓ Blog: PostModel with JSON serialization"
display "  ✓ Blog: Multiple posts in collection"
display "  ✓ API: ApiUser model with JSON serialization"
display "  ✓ API: Multiple users in collection"
display "  ✓ Both apps use models, collections, and JSON"
display "  ✓ Ready for production use!"
