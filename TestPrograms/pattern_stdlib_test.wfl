// Test new standard library pattern functions

// Create some patterns
create pattern word_pattern:
    one or more letter
end pattern

create pattern number_pattern:
    one or more digit
end pattern

// Test data
store test_text as "Hello 123 world 456"

// Test pattern_matches function
store word_matches as call pattern_matches with test_text and word_pattern
display "Word pattern matches: " with word_matches

store number_matches as call pattern_matches with "999" and number_pattern  
display "Number pattern matches '999': " with number_matches

// Test pattern_find function
store first_match as call pattern_find with test_text and word_pattern
check if first_match is not nothing:
    store matched_text as property matched_text of first_match
    store start_pos as property start of first_match
    store end_pos as property end of first_match
    display "First word found: " with matched_text
    display "Position: " with start_pos with " to " with end_pos
otherwise:
    display "No word found"
end check

// Test pattern_find_all function  
store all_matches as call pattern_find_all with test_text and word_pattern
display "Found " with length of all_matches with " word matches:"

store i as 0
count from 0 to length of all_matches minus 1:
    store match_result as all_matches at i
    store matched_text as property matched_text of match_result
    store start_pos as property start of match_result
    display "  Match " with i with ": '" with matched_text with "' at position " with start_pos
    store i as i plus 1
end count

display "Standard library pattern tests completed!"