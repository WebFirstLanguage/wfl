// Test file for advanced directory listing functionality

display "=== Testing Advanced File Listing Features ==="
display ""

// Test 1: Basic list files (existing functionality)
display "Test 1: Basic list files in current directory"
store currentFiles as list files in "."
store fileCount as 0
for each item in currentFiles:
    change fileCount to fileCount plus 1
end for
display "Files count: " with fileCount
display ""

// Test 2: List files with single extension filter
display "Test 2: List .wfl files in TestPrograms"
store wflFiles as list files in "./TestPrograms" with extension ".wfl"
for each item in wflFiles:
    display "  Found: " with item
end for
display ""

// Test 3: List all files recursively
display "Test 3: List all files recursively in src"
store allSrcFiles as list files in "./src" recursively
store srcCount as 0
for each item in allSrcFiles:
    change srcCount to srcCount plus 1
end for
display "Total files in src (recursive): " with srcCount
display ""

// Test 4: List files recursively with extension filter
display "Test 4: List .rs files recursively in src"
store rustFiles as list files in "./src" recursively with extension ".rs"
store rustCount as 0
for each item in rustFiles:
    change rustCount to rustCount plus 1
end for
display "Rust files in src (recursive): " with rustCount
display ""

// Test 6: Use extension filter with variable
display "Test 6: Using extension variable"
store targetExt as ".txt"
store txtFiles as list files in "./TestPrograms" with extension targetExt
for each item in txtFiles:
    display "  Found text file: " with item
end for
display ""

// Test 7: Error handling for non-existent directory
display "Test 7: Error handling"
try:
    store badFiles as list files in "./non_existent_dir" recursively
    display "This should not execute"
when error:
    display "  âœ“ Correctly caught error for non-existent directory"
end try

display ""
display "=== All tests completed ==="