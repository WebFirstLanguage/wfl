// Test MIME Type Detection (Simplified Version)

display "=== Testing MIME Type Detection ==="
display ""

// Define the detect_mime_type action
define action called detect_mime_type with parameters filepath:
    check if filepath ends with ".html":
        return "text/html; charset=utf-8"
    otherwise check if filepath ends with ".css":
        return "text/css; charset=utf-8"
    otherwise check if filepath ends with ".js":
        return "application/javascript; charset=utf-8"
    otherwise check if filepath ends with ".json":
        return "application/json"
    otherwise check if filepath ends with ".txt":
        return "text/plain; charset=utf-8"
    otherwise check if filepath ends with ".png":
        return "image/png"
    otherwise check if filepath ends with ".jpg":
        return "image/jpeg"
    otherwise check if filepath ends with ".gif":
        return "image/gif"
    otherwise check if filepath ends with ".svg":
        return "image/svg+xml"
    otherwise check if filepath ends with ".ico":
        return "image/x-icon"
    otherwise check if filepath ends with ".woff2":
        return "font/woff2"
    otherwise check if filepath ends with ".woff":
        return "font/woff"
    otherwise check if filepath ends with ".ttf":
        return "font/ttf"
    otherwise check if filepath ends with ".pdf":
        return "application/pdf"
    otherwise check if filepath ends with ".zip":
        return "application/zip"
    otherwise check if filepath ends with ".HTML":
        return "text/html; charset=utf-8"
    otherwise:
        return "application/octet-stream"
    end check
end action

// Test cases
display "Testing file type detection:"
display ""

store mime1 as call detect_mime_type with "index.html"
display "✓ index.html → " with mime1

store mime2 as call detect_mime_type with "styles.css"
display "✓ styles.css → " with mime2

store mime3 as call detect_mime_type with "app.js"
display "✓ app.js → " with mime3

store mime4 as call detect_mime_type with "data.json"
display "✓ data.json → " with mime4

store mime5 as call detect_mime_type with "logo.png"
display "✓ logo.png → " with mime5

store mime6 as call detect_mime_type with "photo.jpg"
display "✓ photo.jpg → " with mime6

store mime7 as call detect_mime_type with "icon.svg"
display "✓ icon.svg → " with mime7

store mime8 as call detect_mime_type with "font.woff2"
display "✓ font.woff2 → " with mime8

store mime9 as call detect_mime_type with "document.pdf"
display "✓ document.pdf → " with mime9

store mime10 as call detect_mime_type with "archive.zip"
display "✓ archive.zip → " with mime10

display ""
display "Testing edge cases:"

store mime11 as call detect_mime_type with "README"
display "✓ README (no ext) → " with mime11

store mime12 as call detect_mime_type with "FILE.HTML"
display "✓ FILE.HTML (uppercase) → " with mime12

store mime13 as call detect_mime_type with "/path/to/index.html"
display "✓ /path/to/index.html (full path) → " with mime13

display ""
display "✅ All tests complete!"
display "   MIME type detection working correctly"
