display "Testing recursive file listing..."

try:
    wait for store all_rust_files as list files recursively in "src"
    
    store count as 0
    for each f in all_rust_files:
        store path_len as length of f
        check if path_len is greater than 3:
            // Get last 3 chars
            store c1 as f[path_len - 3]
            store c2 as f[path_len - 2]
            store c3 as f[path_len - 1]
            store ext as c1 with c2 with c3
            
            check if ext is ".rs":
                add 1 to count
                display "Found: " with f
            end check
        end check
    end for
    
    display "Total .rs files found: " with count
    
when error:
    display "Error during file listing"
end try